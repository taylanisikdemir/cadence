{"ts":"2025-08-05T23:17:04.909Z","msg":"stateBuilderImpl Applying events for domain 9751aa20-c32c-4fc7-b4fa-518f99f2d8fa, wfID wf8, first event [id:1, version:0], last event [id:1, version:0]","service":"cadence-history","shard-id":0,"address":"[::]:7934","component":"history-replicator","wf-id":"wf8","wf-run-id":"35bbacc5-26de-4887-9c82-650ffe7066ef","xdc-source-cluster":"cluster0","xdc-incoming-version":0,"wf-first-event-id":1,"wf-next-event-id":2,"logging-call-at":"state_builder.go:100"}
{"ts":"2025-08-05T23:17:04.909Z","msg":"stateBuilderImpl Applying event 1 of 1. Calling UpdateCurrentVersion for domain 9751aa20-c32c-4fc7-b4fa-518f99f2d8fa, wfID wf8, event [id:1, version:0]","service":"cadence-history","shard-id":0,"address":"[::]:7934","component":"history-replicator","wf-id":"wf8","wf-run-id":"35bbacc5-26de-4887-9c82-650ffe7066ef","xdc-source-cluster":"cluster0","xdc-incoming-version":0,"wf-first-event-id":1,"wf-next-event-id":2,"logging-call-at":"state_builder.go:108"}
{"ts":"2025-08-05T23:17:04.909Z","msg":"UpdateCurrentVersion for domain , wfID , version before: -20, version after: 0, forceUpdate: true","service":"cadence-history","shard-id":0,"address":"[::]:7934","component":"history-replicator","wf-id":"wf8","wf-run-id":"35bbacc5-26de-4887-9c82-650ffe7066ef","xdc-source-cluster":"cluster0","xdc-incoming-version":0,"wf-first-event-id":1,"wf-next-event-id":2,"logging-call-at":"mutable_state_builder.go:541"}
{"ts":"2025-08-05T23:17:04.909Z","msg":"Applied event 1 of 1 for domain 9751aa20-c32c-4fc7-b4fa-518f99f2d8fa, wfID wf8, event [id:1, version:0]","service":"cadence-history","shard-id":0,"address":"[::]:7934","component":"history-replicator","wf-id":"wf8","wf-run-id":"35bbacc5-26de-4887-9c82-650ffe7066ef","xdc-source-cluster":"cluster0","xdc-incoming-version":0,"wf-first-event-id":1,"wf-next-event-id":2,"logging-call-at":"state_builder.go:519"}
{"ts":"2025-08-05T23:17:04.925Z","msg":"LookupWorkflow: workflow is retired. returning region, cluster name and failover version","service":"cadence-history","component":"active-cluster-manager","wf-domain-id":"9751aa20-c32c-4fc7-b4fa-518f99f2d8fa","wf-id":"wf8","wf-run-id":"35bbacc5-26de-4887-9c82-650ffe7066ef","region":"region1","active-cluster-name":"cluster1","xdc-failover-version":2,"stack":"goroutine 2851 [running]:\nruntime/debug.Stack()\n\t/usr/local/go/src/runtime/debug/stack.go:26 +0x64\ngithub.com/uber/cadence/common/activecluster.(*managerImpl).LookupWorkflow(0x40008b48c0, {0x3467b90, 0x4002f0c2a0}, {0x400195a750, 0x24}, {0x40043229b8, 0x3}, {0x4002e2e060, 0x24})\n\t/cadence/common/activecluster/manager.go:316 +0x2668\ngithub.com/uber/cadence/service/history/shard.(*contextImpl).allocateTimerIDsLocked(0x400090d560, 0x40040bebd0, {0x40043229b8, 0x3}, {0x4003ddcc60, 0x2, 0x40042fe418?})\n\t/cadence/service/history/shard/context.go:1317 +0x348\ngithub.com/uber/cadence/service/history/shard.(*contextImpl).allocateTaskIDsLocked(0x400090d560, 0x40040bebd0, {0x40043229b8, 0x3}, 0x40042fe598?, 0x40042fe4e0)\n\t/cadence/service/history/shard/context.go:1253 +0x13c\ngithub.com/uber/cadence/service/history/shard.(*contextImpl).CreateWorkflowExecution(0x400090d560, {0x3467ae8?, 0x4002fe64e0?}, 0x4001ccedc0)\n\t/cadence/service/history/shard/context.go:650 +0x1bc\ngithub.com/uber/cadence/service/history/execution.createWorkflowExecutionWithRetry.func1({0x3467ae8?, 0x4002fe64e0?})\n\t/cadence/service/history/execution/context.go:1178 +0x48\ngithub.com/uber/cadence/common/backoff.(*ThrottleRetry).Do(0x4003261840, {0x3467b90, 0x400150bb20}, 0x40042fe880)\n\t/cadence/common/backoff/retry.go:186 +0x108\ngithub.com/uber/cadence/service/history/execution.createWorkflowExecutionWithRetry({0x3467b90, 0x400150bb20}, {0x34a6c60, 0x400090d560}, {0x3480a68?, 0x4003fed410?}, {0x3433780, 0x4003bf2720}, 0x4001ccedc0)\n\t/cadence/service/history/execution/context.go:1195 +0xf4\ngithub.com/uber/cadence/service/history/execution.NewContext.func3({0x3467b90, 0x400150bb20}, 0x4001ccedc0)\n\t/cadence/service/history/execution/context.go:239 +0xe4\ngithub.com/uber/cadence/service/history/execution.(*contextImpl).CreateWorkflowExecution(0x4003156c60, {0x3467b90, 0x400150bb20}, 0x4000c40500, {{{0x2d44fee, 0x8}, {0x40028b4800, 0x18c, 0x200}}, {0x40010e9380, ...}, ...}, ...)\n\t/cadence/service/history/execution/context.go:474 +0x48c\ngithub.com/uber/cadence/service/history/ndc.(*transactionManagerForNewWorkflowImpl).createAsCurrent(0x40042febf8?, {0x3467b90, 0x400150bb20}, {0x3467b90?, 0x400150bb20?, 0x506be20?}, {0x0, 0x0}, {0x347db98, 0x40003263c0})\n\t/cadence/service/history/ndc/new_workflow_transaction_manager.go:207 +0x314\ngithub.com/uber/cadence/service/history/ndc.(*transactionManagerForNewWorkflowImpl).executeTransaction(0x40006ff680?, {0x3467b90?, 0x400150bb20?}, {0x400195a750?, 0x24?, 0x506be20?}, 0x3?, {0x0?, 0x0?}, {0x347db98?, ...})\n\t/cadence/service/history/ndc/new_workflow_transaction_manager.go:351 +0x1d0\ngithub.com/uber/cadence/service/history/ndc.(*transactionManagerForNewWorkflowImpl).dispatchForNewWorkflow(0x400193d3c0, {0x3467b90, 0x400150bb20}, {0x206b11c?, 0xe8?, 0x506be20?}, {0x347db98, 0x40003263c0})\n\t/cadence/service/history/ndc/new_workflow_transaction_manager.go:91 +0x2a0\ngithub.com/uber/cadence/service/history/ndc.(*transactionManagerImpl).createWorkflow(0x4001e8eea0?, {0x3467b90?, 0x400150bb20?}, {0x4003bf23f0?, 0x24?, 0x506be20?}, {0x347db98?, 0x40003263c0?})\n\t/cadence/service/history/ndc/transaction_manager.go:203 +0x3c\ngithub.com/uber/cadence/service/history/ndc.applyStartEvents({0x3467b90, 0x400150bb20}, {0x3499b40, 0x4003156c60}, 0x4003f8b500, {0x34901f0, 0x40014cd080}, {0x3480c08, 0x4001193980}, 0x40012d5e90, ...)\n\t/cadence/service/history/ndc/history_replicator.go:442 +0x4d4\ngithub.com/uber/cadence/service/history/ndc.(*historyReplicatorImpl).applyEvents(0x4000a2bba0, {0x3467b90, 0x400150bb20}, {0x34901f0, 0x40014cd080})\n\t/cadence/service/history/ndc/history_replicator.go:353 +0x624\ngithub.com/uber/cadence/service/history/ndc.(*historyReplicatorImpl).ApplyEvents(0x4000a2bba0, {0x3467b90, 0x400150bb20}, 0x4003260240)\n\t/cadence/service/history/ndc/history_replicator.go:324 +0xbc\ngithub.com/uber/cadence/service/history/engine/engineimpl.(*historyEngineImpl).ReplicateEventsV2(0x40043229b8?, {0x3467b90?, 0x400150bb20?}, 0x40035992d0?)\n\t/cadence/service/history/engine/engineimpl/history_engine.go:352 +0x30\ngithub.com/uber/cadence/service/history/replication.(*taskExecutorImpl).handleHistoryReplicationTaskV2.func2()\n\t/cadence/service/history/replication/task_executor.go:235 +0x38\ngithub.com/uber/cadence/service/history/replication.(*taskExecutorImpl).handleHistoryReplicationTaskV2(0x4000c66f00, 0xa331b0?, 0x28?)\n\t/cadence/service/history/replication/task_executor.go:239 +0x378\ngithub.com/uber/cadence/service/history/replication.(*taskExecutorImpl).execute(0x40020db7d8?, 0x1f20c?, 0x68?)\n\t/cadence/service/history/replication/task_executor.go:96 +0x98\ngithub.com/uber/cadence/service/history/replication.(*taskProcessorImpl).processTaskOnce(0x4000ce4480, 0x4004517d80)\n\t/cadence/service/history/replication/task_processor.go:465 +0x78\ngithub.com/uber/cadence/service/history/replication.(*taskProcessorImpl).processSingleTask.func1.1({0x3467ae8?, 0x400306e3f0?})\n\t/cadence/service/history/replication/task_processor.go:408 +0x58\ngithub.com/uber/cadence/common/backoff.(*ThrottleRetry).Do(0x40032600c0, {0x3467ae8, 0x400306e3f0}, 0x40042ff958)\n\t/cadence/common/backoff/retry.go:186 +0x108\ngithub.com/uber/cadence/service/history/replication.(*taskProcessorImpl).processSingleTask.func1({0x3467ae8, 0x400306e3f0})\n\t/cadence/service/history/replication/task_processor.go:401 +0xb8\ngithub.com/uber/cadence/common/backoff.(*ThrottleRetry).Do(0x4004349f00, {0x3467810, 0x509ae60}, 0x40042ffcd0)\n\t/cadence/common/backoff/retry.go:186 +0x108\ngithub.com/uber/cadence/service/history/replication.(*taskProcessorImpl).processSingleTask(0x4000ce4480, 0x4004517d80)\n\t/cadence/service/history/replication/task_processor.go:418 +0x11c\ngithub.com/uber/cadence/service/history/replication.(*taskProcessorImpl).processResponse(0x4000ce4480, 0x4002e653e0)\n\t/cadence/service/history/replication/task_processor.go:316 +0x1c0\ngithub.com/uber/cadence/service/history/replication.(*taskProcessorImpl).processorLoop(0x4000ce4480)\n\t/cadence/service/history/replication/task_processor.go:233 +0x48c\ncreated by github.com/uber/cadence/service/history/replication.(*taskProcessorImpl).Start in goroutine 2774\n\t/cadence/service/history/replication/task_processor.go:167 +0xc0\n","logging-call-at":"manager.go:309"}
{"ts":"2025-08-05T23:17:04.930Z","msg":"LookupWorkflow: workflow is retired. returning region, cluster name and failover version","service":"cadence-history","component":"active-cluster-manager","wf-domain-id":"9751aa20-c32c-4fc7-b4fa-518f99f2d8fa","wf-id":"wf8","wf-run-id":"35bbacc5-26de-4887-9c82-650ffe7066ef","region":"region1","active-cluster-name":"cluster1","xdc-failover-version":2,"stack":"goroutine 2851 [running]:\nruntime/debug.Stack()\n\t/usr/local/go/src/runtime/debug/stack.go:26 +0x64\ngithub.com/uber/cadence/common/activecluster.(*managerImpl).LookupWorkflow(0x40008b48c0, {0x3467b90, 0x40004f5180}, {0x400195a750, 0x24}, {0x40043229b8, 0x3}, {0x4002e2e060, 0x24})\n\t/cadence/common/activecluster/manager.go:316 +0x2668\ngithub.com/uber/cadence/service/history/shard.(*contextImpl).allocateTimerIDsLocked(0x400090d560, 0x40040bebd0, {0x40043229b8, 0x3}, {0x4003ddcc60, 0x2, 0x40042fe418?})\n\t/cadence/service/history/shard/context.go:1317 +0x348\ngithub.com/uber/cadence/service/history/shard.(*contextImpl).allocateTaskIDsLocked(0x400090d560, 0x40040bebd0, {0x40043229b8, 0x3}, 0x40042fe598?, 0x40042fe4e0)\n\t/cadence/service/history/shard/context.go:1253 +0x13c\ngithub.com/uber/cadence/service/history/shard.(*contextImpl).CreateWorkflowExecution(0x400090d560, {0x3467ae8?, 0x4002fe64e0?}, 0x4001ccedc0)\n\t/cadence/service/history/shard/context.go:650 +0x1bc\ngithub.com/uber/cadence/service/history/execution.createWorkflowExecutionWithRetry.func1({0x3467ae8?, 0x4002fe64e0?})\n\t/cadence/service/history/execution/context.go:1178 +0x48\ngithub.com/uber/cadence/common/backoff.(*ThrottleRetry).Do(0x4003261840, {0x3467b90, 0x400150bb20}, 0x40042fe880)\n\t/cadence/common/backoff/retry.go:186 +0x108\ngithub.com/uber/cadence/service/history/execution.createWorkflowExecutionWithRetry({0x3467b90, 0x400150bb20}, {0x34a6c60, 0x400090d560}, {0x3480a68?, 0x4003fed410?}, {0x3433780, 0x4003bf2720}, 0x4001ccedc0)\n\t/cadence/service/history/execution/context.go:1195 +0xf4\ngithub.com/uber/cadence/service/history/execution.NewContext.func3({0x3467b90, 0x400150bb20}, 0x4001ccedc0)\n\t/cadence/service/history/execution/context.go:239 +0xe4\ngithub.com/uber/cadence/service/history/execution.(*contextImpl).CreateWorkflowExecution(0x4003156c60, {0x3467b90, 0x400150bb20}, 0x4000c40500, {{{0x2d44fee, 0x8}, {0x40028b4800, 0x18c, 0x200}}, {0x40010e9380, ...}, ...}, ...)\n\t/cadence/service/history/execution/context.go:474 +0x48c\ngithub.com/uber/cadence/service/history/ndc.(*transactionManagerForNewWorkflowImpl).createAsCurrent(0x40042febf8?, {0x3467b90, 0x400150bb20}, {0x3467b90?, 0x400150bb20?, 0x506be20?}, {0x0, 0x0}, {0x347db98, 0x40003263c0})\n\t/cadence/service/history/ndc/new_workflow_transaction_manager.go:207 +0x314\ngithub.com/uber/cadence/service/history/ndc.(*transactionManagerForNewWorkflowImpl).executeTransaction(0x40006ff680?, {0x3467b90?, 0x400150bb20?}, {0x400195a750?, 0x24?, 0x506be20?}, 0x3?, {0x0?, 0x0?}, {0x347db98?, ...})\n\t/cadence/service/history/ndc/new_workflow_transaction_manager.go:351 +0x1d0\ngithub.com/uber/cadence/service/history/ndc.(*transactionManagerForNewWorkflowImpl).dispatchForNewWorkflow(0x400193d3c0, {0x3467b90, 0x400150bb20}, {0x206b11c?, 0xe8?, 0x506be20?}, {0x347db98, 0x40003263c0})\n\t/cadence/service/history/ndc/new_workflow_transaction_manager.go:91 +0x2a0\ngithub.com/uber/cadence/service/history/ndc.(*transactionManagerImpl).createWorkflow(0x4001e8eea0?, {0x3467b90?, 0x400150bb20?}, {0x4003bf23f0?, 0x24?, 0x506be20?}, {0x347db98?, 0x40003263c0?})\n\t/cadence/service/history/ndc/transaction_manager.go:203 +0x3c\ngithub.com/uber/cadence/service/history/ndc.applyStartEvents({0x3467b90, 0x400150bb20}, {0x3499b40, 0x4003156c60}, 0x4003f8b500, {0x34901f0, 0x40014cd080}, {0x3480c08, 0x4001193980}, 0x40012d5e90, ...)\n\t/cadence/service/history/ndc/history_replicator.go:442 +0x4d4\ngithub.com/uber/cadence/service/history/ndc.(*historyReplicatorImpl).applyEvents(0x4000a2bba0, {0x3467b90, 0x400150bb20}, {0x34901f0, 0x40014cd080})\n\t/cadence/service/history/ndc/history_replicator.go:353 +0x624\ngithub.com/uber/cadence/service/history/ndc.(*historyReplicatorImpl).ApplyEvents(0x4000a2bba0, {0x3467b90, 0x400150bb20}, 0x4003260240)\n\t/cadence/service/history/ndc/history_replicator.go:324 +0xbc\ngithub.com/uber/cadence/service/history/engine/engineimpl.(*historyEngineImpl).ReplicateEventsV2(0x40043229b8?, {0x3467b90?, 0x400150bb20?}, 0x40035992d0?)\n\t/cadence/service/history/engine/engineimpl/history_engine.go:352 +0x30\ngithub.com/uber/cadence/service/history/replication.(*taskExecutorImpl).handleHistoryReplicationTaskV2.func2()\n\t/cadence/service/history/replication/task_executor.go:235 +0x38\ngithub.com/uber/cadence/service/history/replication.(*taskExecutorImpl).handleHistoryReplicationTaskV2(0x4000c66f00, 0xa331b0?, 0x28?)\n\t/cadence/service/history/replication/task_executor.go:239 +0x378\ngithub.com/uber/cadence/service/history/replication.(*taskExecutorImpl).execute(0x40020db7d8?, 0x1f20c?, 0x68?)\n\t/cadence/service/history/replication/task_executor.go:96 +0x98\ngithub.com/uber/cadence/service/history/replication.(*taskProcessorImpl).processTaskOnce(0x4000ce4480, 0x4004517d80)\n\t/cadence/service/history/replication/task_processor.go:465 +0x78\ngithub.com/uber/cadence/service/history/replication.(*taskProcessorImpl).processSingleTask.func1.1({0x3467ae8?, 0x400306e3f0?})\n\t/cadence/service/history/replication/task_processor.go:408 +0x58\ngithub.com/uber/cadence/common/backoff.(*ThrottleRetry).Do(0x40032600c0, {0x3467ae8, 0x400306e3f0}, 0x40042ff958)\n\t/cadence/common/backoff/retry.go:186 +0x108\ngithub.com/uber/cadence/service/history/replication.(*taskProcessorImpl).processSingleTask.func1({0x3467ae8, 0x400306e3f0})\n\t/cadence/service/history/replication/task_processor.go:401 +0xb8\ngithub.com/uber/cadence/common/backoff.(*ThrottleRetry).Do(0x4004349f00, {0x3467810, 0x509ae60}, 0x40042ffcd0)\n\t/cadence/common/backoff/retry.go:186 +0x108\ngithub.com/uber/cadence/service/history/replication.(*taskProcessorImpl).processSingleTask(0x4000ce4480, 0x4004517d80)\n\t/cadence/service/history/replication/task_processor.go:418 +0x11c\ngithub.com/uber/cadence/service/history/replication.(*taskProcessorImpl).processResponse(0x4000ce4480, 0x4002e653e0)\n\t/cadence/service/history/replication/task_processor.go:316 +0x1c0\ngithub.com/uber/cadence/service/history/replication.(*taskProcessorImpl).processorLoop(0x4000ce4480)\n\t/cadence/service/history/replication/task_processor.go:233 +0x48c\ncreated by github.com/uber/cadence/service/history/replication.(*taskProcessorImpl).Start in goroutine 2774\n\t/cadence/service/history/replication/task_processor.go:167 +0xc0\n","logging-call-at":"manager.go:309"}
{"ts":"2025-08-05T23:17:04.931Z","msg":"ActiveClusterSelectionPolicy is NOT nil for domain 9751aa20-c32c-4fc7-b4fa-518f99f2d8fa, workflow wf8, run 35bbacc5-26de-4887-9c82-650ffe7066ef","service":"cadence-history","logging-call-at":"nosql_execution_store_util.go:103"}
{"ts":"2025-08-05T23:17:04.950Z","msg":"LookupWorkflow: workflow is region sticky. returning region, cluster name and failover version","service":"cadence-history","component":"active-cluster-manager","wf-domain-id":"9751aa20-c32c-4fc7-b4fa-518f99f2d8fa","wf-id":"wf8","wf-run-id":"35bbacc5-26de-4887-9c82-650ffe7066ef","region":"region0","active-cluster-name":"cluster1","xdc-failover-version":2,"stack":"goroutine 2587 [running]:\nruntime/debug.Stack()\n\t/usr/local/go/src/runtime/debug/stack.go:26 +0x64\ngithub.com/uber/cadence/common/activecluster.(*managerImpl).LookupWorkflow(0x40008b48c0, {0x3467810, 0x509ae60}, {0x4003550120, 0x24}, {0x4002f97290, 0x3}, {0x40035500c0, 0x24})\n\t/cadence/common/activecluster/manager.go:372 +0x768\ngithub.com/uber/cadence/service/history/queue.(*taskAllocatorImpl).verifyTaskActiveness(0x4001a1e070, {0x4000bbc450, 0x8}, {0x4003550120, 0x24}, {0x4002f97290, 0x3}, {0x40035500c0, 0x24}, {0x2bafb60, ...}, ...)\n\t/cadence/service/history/queue/task_allocator.go:160 +0x7b8\ngithub.com/uber/cadence/service/history/queue.(*taskAllocatorImpl).VerifyStandbyTask(0x34a6c60?, {0x4000bbc450?, 0x4003550120?}, {0x4003550120?, 0x1?}, {0x4002f97290?, 0x3e81eea?}, {0x40035500c0?, 0x269?}, {0x2bafb60?, ...})\n\t/cadence/service/history/queue/task_allocator.go:89 +0x38\ngithub.com/uber/cadence/service/history/queue.newTransferQueueStandbyProcessor.func1({0x348f4e0, 0x4003a912c0})\n\t/cadence/service/history/queue/transfer_queue_processor.go:597 +0x760\ngithub.com/uber/cadence/service/history/task.(*taskImpl).Execute(0x4000aee870)\n\t/cadence/service/history/task/task.go:151 +0x90\ngithub.com/uber/cadence/common/task.(*parallelTaskProcessorImpl).executeTask.func2({0x3467810?, 0x509ae60?})\n\t/cadence/common/task/parallel_task_processor.go:166 +0x30\ngithub.com/uber/cadence/common/backoff.(*ThrottleRetry).Do(0x4003445d00, {0x3467810, 0x509ae60}, 0x40041e5e78)\n\t/cadence/common/backoff/retry.go:186 +0x108\ngithub.com/uber/cadence/common/task.(*parallelTaskProcessorImpl).executeTask(0x40006cf110, {0xffff56c5df80, 0x4000aee870}, 0x40014c1c70)\n\t/cadence/common/task/parallel_task_processor.go:186 +0x1d4\ngithub.com/uber/cadence/common/task.(*parallelTaskProcessorImpl).taskWorker(0x40006cf110, 0x40014c1c70)\n\t/cadence/common/task/parallel_task_processor.go:148 +0x6c\ncreated by github.com/uber/cadence/common/task.(*parallelTaskProcessorImpl).Start in goroutine 1868\n\t/cadence/common/task/parallel_task_processor.go:96 +0xc4\n","logging-call-at":"manager.go:365"}
{"ts":"2025-08-05T23:17:04.950Z","msg":"Skip task because workflow is not active on the given cluster","service":"cadence-history","shard-id":0,"address":"[::]:7934","wf-id":"wf8","wf-domain-id":"9751aa20-c32c-4fc7-b4fa-518f99f2d8fa","cluster-name":"cluster0","logging-call-at":"task_allocator.go:174"}
{"ts":"2025-08-05T23:17:04.950Z","msg":"verifyTaskActiveness returning (false, <nil>) for cluster cluster0, domainID 9751aa20-c32c-4fc7-b4fa-518f99f2d8fa, wfID wf8, rID 35bbacc5-26de-4887-9c82-650ffe7066ef, task {\"DomainID\":\"9751aa20-c32c-4fc7-b4fa-518f99f2d8fa\",\"WorkflowID\":\"wf8\",\"RunID\":\"35bbacc5-26de-4887-9c82-650ffe7066ef\",\"Version\":0,\"TaskID\":1048577,\"VisibilityTimestamp\":\"2025-08-05T23:17:04.92Z\"}, stacktrace goroutine 2587 [running]:\nruntime/debug.Stack()\n\t/usr/local/go/src/runtime/debug/stack.go:26 +0x64\ngithub.com/uber/cadence/service/history/queue.(*taskAllocatorImpl).verifyTaskActiveness.func1()\n\t/cadence/service/history/queue/task_allocator.go:120 +0x1f8\ngithub.com/uber/cadence/service/history/queue.(*taskAllocatorImpl).verifyTaskActiveness(0x4001a1e070, {0x4000bbc450, 0x8}, {0x4003550120, 0x24}, {0x4002f97290, 0x3}, {0x40035500c0, 0x24}, {0x2bafb60, ...}, ...)\n\t/cadence/service/history/queue/task_allocator.go:179 +0x1020\ngithub.com/uber/cadence/service/history/queue.(*taskAllocatorImpl).VerifyStandbyTask(0x34a6c60?, {0x4000bbc450?, 0x4003550120?}, {0x4003550120?, 0x1?}, {0x4002f97290?, 0x3e81eea?}, {0x40035500c0?, 0x269?}, {0x2bafb60?, ...})\n\t/cadence/service/history/queue/task_allocator.go:89 +0x38\ngithub.com/uber/cadence/service/history/queue.newTransferQueueStandbyProcessor.func1({0x348f4e0, 0x4003a912c0})\n\t/cadence/service/history/queue/transfer_queue_processor.go:597 +0x760\ngithub.com/uber/cadence/service/history/task.(*taskImpl).Execute(0x4000aee870)\n\t/cadence/service/history/task/task.go:151 +0x90\ngithub.com/uber/cadence/common/task.(*parallelTaskProcessorImpl).executeTask.func2({0x3467810?, 0x509ae60?})\n\t/cadence/common/task/parallel_task_processor.go:166 +0x30\ngithub.com/uber/cadence/common/backoff.(*ThrottleRetry).Do(0x4003445d00, {0x3467810, 0x509ae60}, 0x40041e5e78)\n\t/cadence/common/backoff/retry.go:186 +0x108\ngithub.com/uber/cadence/common/task.(*parallelTaskProcessorImpl).executeTask(0x40006cf110, {0xffff56c5df80, 0x4000aee870}, 0x40014c1c70)\n\t/cadence/common/task/parallel_task_processor.go:186 +0x1d4\ngithub.com/uber/cadence/common/task.(*parallelTaskProcessorImpl).taskWorker(0x40006cf110, 0x40014c1c70)\n\t/cadence/common/task/parallel_task_processor.go:148 +0x6c\ncreated by github.com/uber/cadence/common/task.(*parallelTaskProcessorImpl).Start in goroutine 1868\n\t/cadence/common/task/parallel_task_processor.go:96 +0xc4\n","service":"cadence-history","shard-id":0,"address":"[::]:7934","logging-call-at":"task_allocator.go:112"}
{"ts":"2025-08-05T23:17:23.132Z","msg":"LookupWorkflow: workflow is region sticky. returning region, cluster name and failover version","service":"cadence-history","component":"active-cluster-manager","wf-domain-id":"9751aa20-c32c-4fc7-b4fa-518f99f2d8fa","wf-id":"wf8","wf-run-id":"35bbacc5-26de-4887-9c82-650ffe7066ef","region":"region0","active-cluster-name":"cluster1","xdc-failover-version":2,"stack":"goroutine 2727 [running]:\nruntime/debug.Stack()\n\t/usr/local/go/src/runtime/debug/stack.go:26 +0x64\ngithub.com/uber/cadence/common/activecluster.(*managerImpl).LookupWorkflow(0x40008b48c0, {0x3467810, 0x509ae60}, {0x4003bf3d10, 0x24}, {0x40013b1528, 0x3}, {0x4003bf3cb0, 0x24})\n\t/cadence/common/activecluster/manager.go:372 +0x768\ngithub.com/uber/cadence/service/history/queue.(*taskAllocatorImpl).verifyTaskActiveness(0x4001a1e070, {0x4000bbc610, 0x8}, {0x4003bf3d10, 0x24}, {0x40013b1528, 0x3}, {0x4003bf3cb0, 0x24}, {0x2bafb60, ...}, ...)\n\t/cadence/service/history/queue/task_allocator.go:160 +0x7b8\ngithub.com/uber/cadence/service/history/queue.(*taskAllocatorImpl).VerifyActiveTask(0x34a6c60?, {0x4003bf3d10?, 0x4003bf3d10?}, {0x40013b1528?, 0x4003936d38?}, {0x4003bf3cb0?, 0x344df38?}, {0x2bafb60?, 0x4004008120?})\n\t/cadence/service/history/queue/task_allocator.go:74 +0x64\ngithub.com/uber/cadence/service/history/queue.newTransferQueueActiveProcessor.func1({0x348f4e0, 0x4004008120})\n\t/cadence/service/history/queue/transfer_queue_processor.go:521 +0x31c\ngithub.com/uber/cadence/service/history/task.(*taskImpl).Execute(0x400464be00)\n\t/cadence/service/history/task/task.go:151 +0x90\ngithub.com/uber/cadence/common/task.(*parallelTaskProcessorImpl).executeTask.func2({0x3467810?, 0x509ae60?})\n\t/cadence/common/task/parallel_task_processor.go:166 +0x30\ngithub.com/uber/cadence/common/backoff.(*ThrottleRetry).Do(0x4003fac880, {0x3467810, 0x509ae60}, 0x4004b0be78)\n\t/cadence/common/backoff/retry.go:186 +0x108\ngithub.com/uber/cadence/common/task.(*parallelTaskProcessorImpl).executeTask(0x40006cf110, {0xffff56c5df80, 0x400464be00}, 0x400122d340)\n\t/cadence/common/task/parallel_task_processor.go:186 +0x1d4\ngithub.com/uber/cadence/common/task.(*parallelTaskProcessorImpl).taskWorker(0x40006cf110, 0x400122d340)\n\t/cadence/common/task/parallel_task_processor.go:148 +0x6c\ncreated by github.com/uber/cadence/common/task.(*parallelTaskProcessorImpl).Start in goroutine 1868\n\t/cadence/common/task/parallel_task_processor.go:96 +0xc4\n","logging-call-at":"manager.go:365"}
{"ts":"2025-08-05T23:17:23.132Z","msg":"Active cluster for given task","service":"cadence-history","shard-id":0,"address":"[::]:7934","wf-domain-id":"9751aa20-c32c-4fc7-b4fa-518f99f2d8fa","wf-id":"wf8","wf-run-id":"35bbacc5-26de-4887-9c82-650ffe7066ef","cluster-name":"cluster1","logging-call-at":"task_allocator.go:182"}
{"ts":"2025-08-05T23:17:23.132Z","msg":"verifyTaskActiveness returning (true, <nil>) for cluster cluster1, domainID 9751aa20-c32c-4fc7-b4fa-518f99f2d8fa, wfID wf8, rID 35bbacc5-26de-4887-9c82-650ffe7066ef, task {\"DomainID\":\"9751aa20-c32c-4fc7-b4fa-518f99f2d8fa\",\"WorkflowID\":\"wf8\",\"RunID\":\"35bbacc5-26de-4887-9c82-650ffe7066ef\",\"Version\":0,\"TaskID\":1048577,\"VisibilityTimestamp\":\"2025-08-05T23:17:04.92Z\"}, stacktrace goroutine 2727 [running]:\nruntime/debug.Stack()\n\t/usr/local/go/src/runtime/debug/stack.go:26 +0x64\ngithub.com/uber/cadence/service/history/queue.(*taskAllocatorImpl).verifyTaskActiveness.func1()\n\t/cadence/service/history/queue/task_allocator.go:120 +0x1f8\ngithub.com/uber/cadence/service/history/queue.(*taskAllocatorImpl).verifyTaskActiveness(0x4001a1e070, {0x4000bbc610, 0x8}, {0x4003bf3d10, 0x24}, {0x40013b1528, 0x3}, {0x4003bf3cb0, 0x24}, {0x2bafb60, ...}, ...)\n\t/cadence/service/history/queue/task_allocator.go:188 +0x14a4\ngithub.com/uber/cadence/service/history/queue.(*taskAllocatorImpl).VerifyActiveTask(0x34a6c60?, {0x4003bf3d10?, 0x4003bf3d10?}, {0x40013b1528?, 0x4003936d38?}, {0x4003bf3cb0?, 0x344df38?}, {0x2bafb60?, 0x4004008120?})\n\t/cadence/service/history/queue/task_allocator.go:74 +0x64\ngithub.com/uber/cadence/service/history/queue.newTransferQueueActiveProcessor.func1({0x348f4e0, 0x4004008120})\n\t/cadence/service/history/queue/transfer_queue_processor.go:521 +0x31c\ngithub.com/uber/cadence/service/history/task.(*taskImpl).Execute(0x400464be00)\n\t/cadence/service/history/task/task.go:151 +0x90\ngithub.com/uber/cadence/common/task.(*parallelTaskProcessorImpl).executeTask.func2({0x3467810?, 0x509ae60?})\n\t/cadence/common/task/parallel_task_processor.go:166 +0x30\ngithub.com/uber/cadence/common/backoff.(*ThrottleRetry).Do(0x4003fac880, {0x3467810, 0x509ae60}, 0x4004b0be78)\n\t/cadence/common/backoff/retry.go:186 +0x108\ngithub.com/uber/cadence/common/task.(*parallelTaskProcessorImpl).executeTask(0x40006cf110, {0xffff56c5df80, 0x400464be00}, 0x400122d340)\n\t/cadence/common/task/parallel_task_processor.go:186 +0x1d4\ngithub.com/uber/cadence/common/task.(*parallelTaskProcessorImpl).taskWorker(0x40006cf110, 0x400122d340)\n\t/cadence/common/task/parallel_task_processor.go:148 +0x6c\ncreated by github.com/uber/cadence/common/task.(*parallelTaskProcessorImpl).Start in goroutine 1868\n\t/cadence/common/task/parallel_task_processor.go:96 +0xc4\n","service":"cadence-history","shard-id":0,"address":"[::]:7934","logging-call-at":"task_allocator.go:112"}
{"ts":"2025-08-05T23:17:23.139Z","msg":"LookupWorkflow: workflow is region sticky. returning region, cluster name and failover version","service":"cadence-history","component":"active-cluster-manager","wf-domain-id":"9751aa20-c32c-4fc7-b4fa-518f99f2d8fa","wf-id":"wf8","wf-run-id":"35bbacc5-26de-4887-9c82-650ffe7066ef","region":"region0","active-cluster-name":"cluster1","xdc-failover-version":2,"stack":"goroutine 2727 [running]:\nruntime/debug.Stack()\n\t/usr/local/go/src/runtime/debug/stack.go:26 +0x64\ngithub.com/uber/cadence/common/activecluster.(*managerImpl).LookupWorkflow(0x40008b48c0, {0x3467b90, 0x4002a0f570}, {0x40031784b0, 0x24}, {0x40022d98da, 0x3}, {0x4003178480, 0x24})\n\t/cadence/common/activecluster/manager.go:372 +0x768\ngithub.com/uber/cadence/service/history/execution.(*mutableStateBuilder).Load(0x4003fa3208, {0x3467b90, 0x4002a0f570}, 0x400473a1b0)\n\t/cadence/service/history/execution/mutable_state_builder.go:386 +0x834\ngithub.com/uber/cadence/service/history/execution.(*contextImpl).LoadWorkflowExecutionWithTaskVersion(0x4003156c60, {0x3467b90, 0x4002a0f570}, 0xffffffffffffffe8)\n\t/cadence/service/history/execution/context.go:370 +0x218\ngithub.com/uber/cadence/service/history/execution.(*contextImpl).LoadWorkflowExecution(0x27660c0?, {0x3467b90?, 0x4002a0f570?})\n\t/cadence/service/history/execution/context.go:428 +0x28\ngithub.com/uber/cadence/service/history/task.loadMutableState({0x3467b90, 0x4002a0f570}, {0x3499b40, 0x4003156c60}, {0x348f4e0, 0x4004008120}, {0x347bf10, 0x400456c1e0}, {0x3480a68, 0x40012d5a10}, ...)\n\t/cadence/service/history/task/task_util.go:223 +0x68\ngithub.com/uber/cadence/service/history/task.(*transferActiveTaskExecutor).processRecordWorkflowStartedOrUpsertHelper(0x4001a0f6d0, {0x3467b90, 0x4002a0f570}, {0x348f4e0, 0x4004008120}, 0x1)\n\t/cadence/service/history/task/transfer_active_task_executor.go:943 +0x224\ngithub.com/uber/cadence/service/history/task.(*transferActiveTaskExecutor).processRecordWorkflowStarted(...)\n\t/cadence/service/history/task/transfer_active_task_executor.go:911\ngithub.com/uber/cadence/service/history/task.(*transferActiveTaskExecutor).Execute(0x4001a0f6d0, {0x349d6b0, 0x400464be00})\n\t/cadence/service/history/task/transfer_active_task_executor.go:154 +0x800\ngithub.com/uber/cadence/service/history/task.(*taskImpl).Execute(0x400464be00)\n\t/cadence/service/history/task/task.go:167 +0x22c\ngithub.com/uber/cadence/common/task.(*parallelTaskProcessorImpl).executeTask.func2({0x3467810?, 0x509ae60?})\n\t/cadence/common/task/parallel_task_processor.go:166 +0x30\ngithub.com/uber/cadence/common/backoff.(*ThrottleRetry).Do(0x4003fac880, {0x3467810, 0x509ae60}, 0x4004b0be78)\n\t/cadence/common/backoff/retry.go:186 +0x108\ngithub.com/uber/cadence/common/task.(*parallelTaskProcessorImpl).executeTask(0x40006cf110, {0xffff56c5df80, 0x400464be00}, 0x400122d340)\n\t/cadence/common/task/parallel_task_processor.go:186 +0x1d4\ngithub.com/uber/cadence/common/task.(*parallelTaskProcessorImpl).taskWorker(0x40006cf110, 0x400122d340)\n\t/cadence/common/task/parallel_task_processor.go:148 +0x6c\ncreated by github.com/uber/cadence/common/task.(*parallelTaskProcessorImpl).Start in goroutine 1868\n\t/cadence/common/task/parallel_task_processor.go:96 +0xc4\n","logging-call-at":"manager.go:365"}
{"ts":"2025-08-05T23:17:23.142Z","msg":"LookupWorkflow: workflow is region sticky. returning region, cluster name and failover version","service":"cadence-history","component":"active-cluster-manager","wf-domain-id":"9751aa20-c32c-4fc7-b4fa-518f99f2d8fa","wf-id":"wf8","wf-run-id":"35bbacc5-26de-4887-9c82-650ffe7066ef","region":"region0","active-cluster-name":"cluster1","xdc-failover-version":2,"stack":"goroutine 2727 [running]:\nruntime/debug.Stack()\n\t/usr/local/go/src/runtime/debug/stack.go:26 +0x64\ngithub.com/uber/cadence/common/activecluster.(*managerImpl).LookupWorkflow(0x40008b48c0, {0x3467b90, 0x4002a0f570}, {0x40031784b0, 0x24}, {0x40022d98da, 0x3}, {0x4003178480, 0x24})\n\t/cadence/common/activecluster/manager.go:372 +0x768\ngithub.com/uber/cadence/service/history/execution.(*mutableStateBuilder).StartTransaction(0x4003fa3208, {0x3467b90, 0x4002a0f570}, 0x4004312510, 0xffffffffffffffe8)\n\t/cadence/service/history/execution/mutable_state_builder.go:1430 +0xf4\ngithub.com/uber/cadence/service/history/execution.(*contextImpl).LoadWorkflowExecutionWithTaskVersion(0x4003156c60, {0x3467b90, 0x4002a0f570}, 0xffffffffffffffe8)\n\t/cadence/service/history/execution/context.go:390 +0x5c8\ngithub.com/uber/cadence/service/history/execution.(*contextImpl).LoadWorkflowExecution(0x27660c0?, {0x3467b90?, 0x4002a0f570?})\n\t/cadence/service/history/execution/context.go:428 +0x28\ngithub.com/uber/cadence/service/history/task.loadMutableState({0x3467b90, 0x4002a0f570}, {0x3499b40, 0x4003156c60}, {0x348f4e0, 0x4004008120}, {0x347bf10, 0x400456c1e0}, {0x3480a68, 0x40012d5a10}, ...)\n\t/cadence/service/history/task/task_util.go:223 +0x68\ngithub.com/uber/cadence/service/history/task.(*transferActiveTaskExecutor).processRecordWorkflowStartedOrUpsertHelper(0x4001a0f6d0, {0x3467b90, 0x4002a0f570}, {0x348f4e0, 0x4004008120}, 0x1)\n\t/cadence/service/history/task/transfer_active_task_executor.go:943 +0x224\ngithub.com/uber/cadence/service/history/task.(*transferActiveTaskExecutor).processRecordWorkflowStarted(...)\n\t/cadence/service/history/task/transfer_active_task_executor.go:911\ngithub.com/uber/cadence/service/history/task.(*transferActiveTaskExecutor).Execute(0x4001a0f6d0, {0x349d6b0, 0x400464be00})\n\t/cadence/service/history/task/transfer_active_task_executor.go:154 +0x800\ngithub.com/uber/cadence/service/history/task.(*taskImpl).Execute(0x400464be00)\n\t/cadence/service/history/task/task.go:167 +0x22c\ngithub.com/uber/cadence/common/task.(*parallelTaskProcessorImpl).executeTask.func2({0x3467810?, 0x509ae60?})\n\t/cadence/common/task/parallel_task_processor.go:166 +0x30\ngithub.com/uber/cadence/common/backoff.(*ThrottleRetry).Do(0x4003fac880, {0x3467810, 0x509ae60}, 0x4004b0be78)\n\t/cadence/common/backoff/retry.go:186 +0x108\ngithub.com/uber/cadence/common/task.(*parallelTaskProcessorImpl).executeTask(0x40006cf110, {0xffff56c5df80, 0x400464be00}, 0x400122d340)\n\t/cadence/common/task/parallel_task_processor.go:186 +0x1d4\ngithub.com/uber/cadence/common/task.(*parallelTaskProcessorImpl).taskWorker(0x40006cf110, 0x400122d340)\n\t/cadence/common/task/parallel_task_processor.go:148 +0x6c\ncreated by github.com/uber/cadence/common/task.(*parallelTaskProcessorImpl).Start in goroutine 1868\n\t/cadence/common/task/parallel_task_processor.go:96 +0xc4\n","logging-call-at":"manager.go:365"}
{"ts":"2025-08-05T23:17:23.142Z","msg":"StartTransaction calling UpdateCurrentVersion for domain test-domain-aa, wfID wf8, incomingTaskVersion -24, version 2, stacktrace goroutine 2727 [running]:\nruntime/debug.Stack()\n\t/usr/local/go/src/runtime/debug/stack.go:26 +0x64\ngithub.com/uber/cadence/service/history/execution.(*mutableStateBuilder).StartTransaction(0x4003fa3208, {0x3467b90?, 0x4002a0f570?}, 0x4004312510, 0xffffffffffffffe8)\n\t/cadence/service/history/execution/mutable_state_builder.go:1439 +0x140\ngithub.com/uber/cadence/service/history/execution.(*contextImpl).LoadWorkflowExecutionWithTaskVersion(0x4003156c60, {0x3467b90, 0x4002a0f570}, 0xffffffffffffffe8)\n\t/cadence/service/history/execution/context.go:390 +0x5c8\ngithub.com/uber/cadence/service/history/execution.(*contextImpl).LoadWorkflowExecution(0x27660c0?, {0x3467b90?, 0x4002a0f570?})\n\t/cadence/service/history/execution/context.go:428 +0x28\ngithub.com/uber/cadence/service/history/task.loadMutableState({0x3467b90, 0x4002a0f570}, {0x3499b40, 0x4003156c60}, {0x348f4e0, 0x4004008120}, {0x347bf10, 0x400456c1e0}, {0x3480a68, 0x40012d5a10}, ...)\n\t/cadence/service/history/task/task_util.go:223 +0x68\ngithub.com/uber/cadence/service/history/task.(*transferActiveTaskExecutor).processRecordWorkflowStartedOrUpsertHelper(0x4001a0f6d0, {0x3467b90, 0x4002a0f570}, {0x348f4e0, 0x4004008120}, 0x1)\n\t/cadence/service/history/task/transfer_active_task_executor.go:943 +0x224\ngithub.com/uber/cadence/service/history/task.(*transferActiveTaskExecutor).processRecordWorkflowStarted(...)\n\t/cadence/service/history/task/transfer_active_task_executor.go:911\ngithub.com/uber/cadence/service/history/task.(*transferActiveTaskExecutor).Execute(0x4001a0f6d0, {0x349d6b0, 0x400464be00})\n\t/cadence/service/history/task/transfer_active_task_executor.go:154 +0x800\ngithub.com/uber/cadence/service/history/task.(*taskImpl).Execute(0x400464be00)\n\t/cadence/service/history/task/task.go:167 +0x22c\ngithub.com/uber/cadence/common/task.(*parallelTaskProcessorImpl).executeTask.func2({0x3467810?, 0x509ae60?})\n\t/cadence/common/task/parallel_task_processor.go:166 +0x30\ngithub.com/uber/cadence/common/backoff.(*ThrottleRetry).Do(0x4003fac880, {0x3467810, 0x509ae60}, 0x4004b0be78)\n\t/cadence/common/backoff/retry.go:186 +0x108\ngithub.com/uber/cadence/common/task.(*parallelTaskProcessorImpl).executeTask(0x40006cf110, {0xffff56c5df80, 0x400464be00}, 0x400122d340)\n\t/cadence/common/task/parallel_task_processor.go:186 +0x1d4\ngithub.com/uber/cadence/common/task.(*parallelTaskProcessorImpl).taskWorker(0x40006cf110, 0x400122d340)\n\t/cadence/common/task/parallel_task_processor.go:148 +0x6c\ncreated by github.com/uber/cadence/common/task.(*parallelTaskProcessorImpl).Start in goroutine 1868\n\t/cadence/common/task/parallel_task_processor.go:96 +0xc4\n","service":"cadence-history","shard-id":0,"address":"[::]:7934","component":"history-cache","wf-domain-id":"9751aa20-c32c-4fc7-b4fa-518f99f2d8fa","wf-id":"wf8","wf-run-id":"35bbacc5-26de-4887-9c82-650ffe7066ef","logging-call-at":"mutable_state_builder.go:1438"}
{"ts":"2025-08-05T23:17:23.142Z","msg":"UpdateCurrentVersion for domain 9751aa20-c32c-4fc7-b4fa-518f99f2d8fa, wfID wf8, version before: 2, version after: 2, forceUpdate: false","service":"cadence-history","shard-id":0,"address":"[::]:7934","component":"history-cache","wf-domain-id":"9751aa20-c32c-4fc7-b4fa-518f99f2d8fa","wf-id":"wf8","wf-run-id":"35bbacc5-26de-4887-9c82-650ffe7066ef","logging-call-at":"mutable_state_builder.go:541"}
{"ts":"2025-08-05T23:17:23.142Z","msg":"DomainID: 9751aa20-c32c-4fc7-b4fa-518f99f2d8fa is active, task: &{{9751aa20-c32c-4fc7-b4fa-518f99f2d8fa wf8 35bbacc5-26de-4887-9c82-650ffe7066ef} {0 1048577 2025-08-05 23:17:04.92 +0000 UTC}} version == target version: 0.","service":"cadence-history","shard-id":0,"address":"[::]:7934","component":"transfer-queue-processor","queue-type":"active","logging-call-at":"task_util.go:209"}
{"ts":"2025-08-05T23:21:25.697Z","msg":"LookupWorkflow: workflow is region sticky. returning region, cluster name and failover version","service":"cadence-history","component":"active-cluster-manager","wf-domain-id":"9751aa20-c32c-4fc7-b4fa-518f99f2d8fa","wf-id":"wf8","wf-run-id":"35bbacc5-26de-4887-9c82-650ffe7066ef","region":"region0","active-cluster-name":"cluster1","xdc-failover-version":2,"stack":"goroutine 2509 [running]:\nruntime/debug.Stack()\n\t/usr/local/go/src/runtime/debug/stack.go:26 +0x64\ngithub.com/uber/cadence/common/activecluster.(*managerImpl).LookupWorkflow(0x40008b48c0, {0x3467810, 0x509ae60}, {0x4000df7dd0, 0x24}, {0x4005087580, 0x3}, {0x4000df7e00, 0x24})\n\t/cadence/common/activecluster/manager.go:372 +0x768\ngithub.com/uber/cadence/service/history/queue.(*taskAllocatorImpl).verifyTaskActiveness(0x4001a1ea10, {0x4000bbc450, 0x8}, {0x4000df7dd0, 0x24}, {0x4005087580, 0x3}, {0x4000df7e00, 0x24}, {0x2bb0ea0, ...}, ...)\n\t/cadence/service/history/queue/task_allocator.go:160 +0x7b8\ngithub.com/uber/cadence/service/history/queue.(*taskAllocatorImpl).VerifyStandbyTask(0x34a6c60?, {0x4000bbc450?, 0x4000df7dd0?}, {0x4000df7dd0?, 0x0?}, {0x4005087580?, 0x4003711a08?}, {0x4000df7e00?, 0x4003922501?}, {0x2bb0ea0?, ...})\n\t/cadence/service/history/queue/task_allocator.go:89 +0x38\ngithub.com/uber/cadence/service/history/queue.newTimerQueueStandbyProcessor.func1({0x348fd30, 0x400377e4e0})\n\t/cadence/service/history/queue/timer_queue_standby_processor.go:77 +0x790\ngithub.com/uber/cadence/service/history/task.(*taskImpl).Execute(0x400376cf00)\n\t/cadence/service/history/task/task.go:151 +0x90\ngithub.com/uber/cadence/common/task.(*parallelTaskProcessorImpl).executeTask.func2({0x3467810?, 0x509ae60?})\n\t/cadence/common/task/parallel_task_processor.go:166 +0x30\ngithub.com/uber/cadence/common/backoff.(*ThrottleRetry).Do(0x400520a740, {0x3467810, 0x509ae60}, 0x400169be78)\n\t/cadence/common/backoff/retry.go:186 +0x108\ngithub.com/uber/cadence/common/task.(*parallelTaskProcessorImpl).executeTask(0x40006cf110, {0xffff56c5df80, 0x400376cf00}, 0x40014c1420)\n\t/cadence/common/task/parallel_task_processor.go:186 +0x1d4\ngithub.com/uber/cadence/common/task.(*parallelTaskProcessorImpl).taskWorker(0x40006cf110, 0x40014c1420)\n\t/cadence/common/task/parallel_task_processor.go:148 +0x6c\ncreated by github.com/uber/cadence/common/task.(*parallelTaskProcessorImpl).Start in goroutine 1868\n\t/cadence/common/task/parallel_task_processor.go:96 +0xc4\n","logging-call-at":"manager.go:365"}
{"ts":"2025-08-05T23:21:25.698Z","msg":"Skip task because workflow is not active on the given cluster","service":"cadence-history","shard-id":0,"address":"[::]:7934","wf-id":"wf8","wf-domain-id":"9751aa20-c32c-4fc7-b4fa-518f99f2d8fa","cluster-name":"cluster0","logging-call-at":"task_allocator.go:174"}
{"ts":"2025-08-05T23:21:25.698Z","msg":"verifyTaskActiveness returning (false, <nil>) for cluster cluster0, domainID 9751aa20-c32c-4fc7-b4fa-518f99f2d8fa, wfID wf8, rID 35bbacc5-26de-4887-9c82-650ffe7066ef, task {\"DomainID\":\"9751aa20-c32c-4fc7-b4fa-518f99f2d8fa\",\"WorkflowID\":\"wf8\",\"RunID\":\"35bbacc5-26de-4887-9c82-650ffe7066ef\",\"Version\":0,\"TaskID\":1048579,\"VisibilityTimestamp\":\"2025-08-05T23:17:12.697Z\",\"TimeoutType\":1}, stacktrace goroutine 2509 [running]:\nruntime/debug.Stack()\n\t/usr/local/go/src/runtime/debug/stack.go:26 +0x64\ngithub.com/uber/cadence/service/history/queue.(*taskAllocatorImpl).verifyTaskActiveness.func1()\n\t/cadence/service/history/queue/task_allocator.go:120 +0x1f8\ngithub.com/uber/cadence/service/history/queue.(*taskAllocatorImpl).verifyTaskActiveness(0x4001a1ea10, {0x4000bbc450, 0x8}, {0x4000df7dd0, 0x24}, {0x4005087580, 0x3}, {0x4000df7e00, 0x24}, {0x2bb0ea0, ...}, ...)\n\t/cadence/service/history/queue/task_allocator.go:179 +0x1020\ngithub.com/uber/cadence/service/history/queue.(*taskAllocatorImpl).VerifyStandbyTask(0x34a6c60?, {0x4000bbc450?, 0x4000df7dd0?}, {0x4000df7dd0?, 0x0?}, {0x4005087580?, 0x4003711a08?}, {0x4000df7e00?, 0x4003922501?}, {0x2bb0ea0?, ...})\n\t/cadence/service/history/queue/task_allocator.go:89 +0x38\ngithub.com/uber/cadence/service/history/queue.newTimerQueueStandbyProcessor.func1({0x348fd30, 0x400377e4e0})\n\t/cadence/service/history/queue/timer_queue_standby_processor.go:77 +0x790\ngithub.com/uber/cadence/service/history/task.(*taskImpl).Execute(0x400376cf00)\n\t/cadence/service/history/task/task.go:151 +0x90\ngithub.com/uber/cadence/common/task.(*parallelTaskProcessorImpl).executeTask.func2({0x3467810?, 0x509ae60?})\n\t/cadence/common/task/parallel_task_processor.go:166 +0x30\ngithub.com/uber/cadence/common/backoff.(*ThrottleRetry).Do(0x400520a740, {0x3467810, 0x509ae60}, 0x400169be78)\n\t/cadence/common/backoff/retry.go:186 +0x108\ngithub.com/uber/cadence/common/task.(*parallelTaskProcessorImpl).executeTask(0x40006cf110, {0xffff56c5df80, 0x400376cf00}, 0x40014c1420)\n\t/cadence/common/task/parallel_task_processor.go:186 +0x1d4\ngithub.com/uber/cadence/common/task.(*parallelTaskProcessorImpl).taskWorker(0x40006cf110, 0x40014c1420)\n\t/cadence/common/task/parallel_task_processor.go:148 +0x6c\ncreated by github.com/uber/cadence/common/task.(*parallelTaskProcessorImpl).Start in goroutine 1868\n\t/cadence/common/task/parallel_task_processor.go:96 +0xc4\n","service":"cadence-history","shard-id":0,"address":"[::]:7934","logging-call-at":"task_allocator.go:112"}
{"ts":"2025-08-05T23:21:25.697Z","msg":"LookupWorkflow: workflow is region sticky. returning region, cluster name and failover version","service":"cadence-history","component":"active-cluster-manager","wf-domain-id":"9751aa20-c32c-4fc7-b4fa-518f99f2d8fa","wf-id":"wf8","wf-run-id":"35bbacc5-26de-4887-9c82-650ffe7066ef","region":"region0","active-cluster-name":"cluster1","xdc-failover-version":2,"stack":"goroutine 2762 [running]:\nruntime/debug.Stack()\n\t/usr/local/go/src/runtime/debug/stack.go:26 +0x64\ngithub.com/uber/cadence/common/activecluster.(*managerImpl).LookupWorkflow(0x40008b48c0, {0x3467b90, 0x40037fe620}, {0x4000df7e30, 0x24}, {0x4005087618, 0x3}, {0x4000df7e60, 0x24})\n\t/cadence/common/activecluster/manager.go:372 +0x768\ngithub.com/uber/cadence/service/history/task.getRemoteClusterName({0x3467b90, 0x40037fe620}, {0x4000bbc610, 0x8}, {0x3480c08, 0x4001193980}, {0x34812e0, 0x40008b48c0}, {0x348fb68, 0x400377e540})\n\t/cadence/service/history/task/standby_task_util.go:216 +0x118\ngithub.com/uber/cadence/service/history/task.NewTimerStandbyTaskExecutor.func1({0x3467b90, 0x40037fe620}, {0x348fb68, 0x400377e540})\n\t/cadence/service/history/task/timer_standby_task_executor.go:80 +0xe8\ngithub.com/uber/cadence/service/history/task.(*timerStandbyTaskExecutor).getCurrentTime(0x4000b1efc0, {0x348fb68, 0x400377e540})\n\t/cadence/service/history/task/timer_standby_task_executor.go:577 +0x78\ngithub.com/uber/cadence/service/history/task.getStandbyPostActionFn({0x3480a68, 0x40012d5d28}, {0x348fb68, 0x400377e540}, 0x4002c5d8c0, 0x12a05f200, 0x2540be400, 0x4002b618b0, 0x302e250)\n\t/cadence/service/history/task/standby_task_util.go:179 +0x74c\ngithub.com/uber/cadence/service/history/task.(*timerStandbyTaskExecutor).executeWorkflowTimeoutTask(0x4000b1efc0, {0x3467b90, 0x40037fe540}, 0x400377e540)\n\t/cadence/service/history/task/timer_standby_task_executor.go:416 +0xe4\ngithub.com/uber/cadence/service/history/task.(*timerStandbyTaskExecutor).Execute(0x4000b1efc0, {0x349d6b0, 0x400376d2c0})\n\t/cadence/service/history/task/timer_standby_task_executor.go:120 +0x764\ngithub.com/uber/cadence/service/history/task.(*taskImpl).Execute(0x400376d2c0)\n\t/cadence/service/history/task/task.go:167 +0x22c\ngithub.com/uber/cadence/common/task.(*parallelTaskProcessorImpl).executeTask.func2({0x3467810?, 0x509ae60?})\n\t/cadence/common/task/parallel_task_processor.go:166 +0x30\ngithub.com/uber/cadence/common/backoff.(*ThrottleRetry).Do(0x40041d59c0, {0x3467810, 0x509ae60}, 0x4002b61e78)\n\t/cadence/common/backoff/retry.go:186 +0x108\ngithub.com/uber/cadence/common/task.(*parallelTaskProcessorImpl).executeTask(0x40006cf110, {0xffff56c5df80, 0x400376d2c0}, 0x40010a1650)\n\t/cadence/common/task/parallel_task_processor.go:186 +0x1d4\ngithub.com/uber/cadence/common/task.(*parallelTaskProcessorImpl).taskWorker(0x40006cf110, 0x40010a1650)\n\t/cadence/common/task/parallel_task_processor.go:148 +0x6c\ncreated by github.com/uber/cadence/common/task.(*parallelTaskProcessorImpl).Start in goroutine 1868\n\t/cadence/common/task/parallel_task_processor.go:96 +0xc4\n","logging-call-at":"manager.go:365"}
{"ts":"2025-08-05T23:21:25.698Z","msg":"getStandbyPostActionFn error getting current time, fallback to standbyTaskPostActionNoOp","service":"cadence-history","shard-id":0,"address":"[::]:7934","component":"timer-queue-processor","queue-type":"standby","active-cluster-name":"cluster0","wf-id":"wf8","wf-run-id":"35bbacc5-26de-4887-9c82-650ffe7066ef","wf-domain-id":"9751aa20-c32c-4fc7-b4fa-518f99f2d8fa","queue-task-id":1048578,"queue-task-type":3,"timestamp":"2025-08-05T23:20:17.697Z","error":"domain becomes active when processing task as standby","logging-call-at":"standby_task_util.go:182","stacktrace":"github.com/uber/cadence/service/history/task.getStandbyPostActionFn\n\t/cadence/service/history/task/standby_task_util.go:182\ngithub.com/uber/cadence/service/history/task.(*timerStandbyTaskExecutor).executeWorkflowTimeoutTask\n\t/cadence/service/history/task/timer_standby_task_executor.go:416\ngithub.com/uber/cadence/service/history/task.(*timerStandbyTaskExecutor).Execute\n\t/cadence/service/history/task/timer_standby_task_executor.go:120\ngithub.com/uber/cadence/service/history/task.(*taskImpl).Execute\n\t/cadence/service/history/task/task.go:167\ngithub.com/uber/cadence/common/task.(*parallelTaskProcessorImpl).executeTask.func2\n\t/cadence/common/task/parallel_task_processor.go:166\ngithub.com/uber/cadence/common/backoff.(*ThrottleRetry).Do\n\t/cadence/common/backoff/retry.go:186\ngithub.com/uber/cadence/common/task.(*parallelTaskProcessorImpl).executeTask\n\t/cadence/common/task/parallel_task_processor.go:186\ngithub.com/uber/cadence/common/task.(*parallelTaskProcessorImpl).taskWorker\n\t/cadence/common/task/parallel_task_processor.go:148"}
{"ts":"2025-08-05T23:21:25.702Z","msg":"LookupWorkflow: workflow is region sticky. returning region, cluster name and failover version","service":"cadence-history","component":"active-cluster-manager","wf-domain-id":"9751aa20-c32c-4fc7-b4fa-518f99f2d8fa","wf-id":"wf8","wf-run-id":"35bbacc5-26de-4887-9c82-650ffe7066ef","region":"region0","active-cluster-name":"cluster1","xdc-failover-version":2,"stack":"goroutine 2762 [running]:\nruntime/debug.Stack()\n\t/usr/local/go/src/runtime/debug/stack.go:26 +0x64\ngithub.com/uber/cadence/common/activecluster.(*managerImpl).LookupWorkflow(0x40008b48c0, {0x3467b90, 0x40037fe540}, {0x40031784b0, 0x24}, {0x40022d98da, 0x3}, {0x4003178480, 0x24})\n\t/cadence/common/activecluster/manager.go:372 +0x768\ngithub.com/uber/cadence/service/history/execution.(*mutableStateBuilder).StartTransaction(0x4003fa3208, {0x3467b90, 0x40037fe540}, 0x4001917dd0, 0xffffffffffffffe8)\n\t/cadence/service/history/execution/mutable_state_builder.go:1430 +0xf4\ngithub.com/uber/cadence/service/history/execution.(*contextImpl).LoadWorkflowExecutionWithTaskVersion(0x4003156c60, {0x3467b90, 0x40037fe540}, 0xffffffffffffffe8)\n\t/cadence/service/history/execution/context.go:390 +0x5c8\ngithub.com/uber/cadence/service/history/execution.(*contextImpl).LoadWorkflowExecution(0x27660c0?, {0x3467b90?, 0x40037fe540?})\n\t/cadence/service/history/execution/context.go:428 +0x28\ngithub.com/uber/cadence/service/history/task.loadMutableState({0x3467b90, 0x40037fe540}, {0x3499b40, 0x4003156c60}, {0x348fb68, 0x400377e540}, {0x347bf10, 0x400432e480}, {0x3480a68, 0x40012d5d28}, ...)\n\t/cadence/service/history/task/task_util.go:223 +0x68\ngithub.com/uber/cadence/service/history/task.(*timerStandbyTaskExecutor).processTimer(0x4000b1efc0, {0x3467b90, 0x40037fe540}, {0x348fb68, 0x400377e540}, 0x0, 0x4002b618d0, 0x302e248)\n\t/cadence/service/history/task/timer_standby_task_executor.go:461 +0x1d8\ngithub.com/uber/cadence/service/history/task.(*timerStandbyTaskExecutor).executeWorkflowTimeoutTask(0x4000b1efc0, {0x3467b90, 0x40037fe540}, 0x400377e540)\n\t/cadence/service/history/task/timer_standby_task_executor.go:411 +0x10c\ngithub.com/uber/cadence/service/history/task.(*timerStandbyTaskExecutor).Execute(0x4000b1efc0, {0x349d6b0, 0x400376d2c0})\n\t/cadence/service/history/task/timer_standby_task_executor.go:120 +0x764\ngithub.com/uber/cadence/service/history/task.(*taskImpl).Execute(0x400376d2c0)\n\t/cadence/service/history/task/task.go:167 +0x22c\ngithub.com/uber/cadence/common/task.(*parallelTaskProcessorImpl).executeTask.func2({0x3467810?, 0x509ae60?})\n\t/cadence/common/task/parallel_task_processor.go:166 +0x30\ngithub.com/uber/cadence/common/backoff.(*ThrottleRetry).Do(0x40041d59c0, {0x3467810, 0x509ae60}, 0x4002b61e78)\n\t/cadence/common/backoff/retry.go:186 +0x108\ngithub.com/uber/cadence/common/task.(*parallelTaskProcessorImpl).executeTask(0x40006cf110, {0xffff56c5df80, 0x400376d2c0}, 0x40010a1650)\n\t/cadence/common/task/parallel_task_processor.go:186 +0x1d4\ngithub.com/uber/cadence/common/task.(*parallelTaskProcessorImpl).taskWorker(0x40006cf110, 0x40010a1650)\n\t/cadence/common/task/parallel_task_processor.go:148 +0x6c\ncreated by github.com/uber/cadence/common/task.(*parallelTaskProcessorImpl).Start in goroutine 1868\n\t/cadence/common/task/parallel_task_processor.go:96 +0xc4\n","logging-call-at":"manager.go:365"}
{"ts":"2025-08-05T23:21:25.703Z","msg":"StartTransaction calling UpdateCurrentVersion for domain test-domain-aa, wfID wf8, incomingTaskVersion -24, version 2, stacktrace goroutine 2762 [running]:\nruntime/debug.Stack()\n\t/usr/local/go/src/runtime/debug/stack.go:26 +0x64\ngithub.com/uber/cadence/service/history/execution.(*mutableStateBuilder).StartTransaction(0x4003fa3208, {0x3467b90?, 0x40037fe540?}, 0x4001917dd0, 0xffffffffffffffe8)\n\t/cadence/service/history/execution/mutable_state_builder.go:1439 +0x140\ngithub.com/uber/cadence/service/history/execution.(*contextImpl).LoadWorkflowExecutionWithTaskVersion(0x4003156c60, {0x3467b90, 0x40037fe540}, 0xffffffffffffffe8)\n\t/cadence/service/history/execution/context.go:390 +0x5c8\ngithub.com/uber/cadence/service/history/execution.(*contextImpl).LoadWorkflowExecution(0x27660c0?, {0x3467b90?, 0x40037fe540?})\n\t/cadence/service/history/execution/context.go:428 +0x28\ngithub.com/uber/cadence/service/history/task.loadMutableState({0x3467b90, 0x40037fe540}, {0x3499b40, 0x4003156c60}, {0x348fb68, 0x400377e540}, {0x347bf10, 0x400432e480}, {0x3480a68, 0x40012d5d28}, ...)\n\t/cadence/service/history/task/task_util.go:223 +0x68\ngithub.com/uber/cadence/service/history/task.(*timerStandbyTaskExecutor).processTimer(0x4000b1efc0, {0x3467b90, 0x40037fe540}, {0x348fb68, 0x400377e540}, 0x0, 0x4002b618d0, 0x302e248)\n\t/cadence/service/history/task/timer_standby_task_executor.go:461 +0x1d8\ngithub.com/uber/cadence/service/history/task.(*timerStandbyTaskExecutor).executeWorkflowTimeoutTask(0x4000b1efc0, {0x3467b90, 0x40037fe540}, 0x400377e540)\n\t/cadence/service/history/task/timer_standby_task_executor.go:411 +0x10c\ngithub.com/uber/cadence/service/history/task.(*timerStandbyTaskExecutor).Execute(0x4000b1efc0, {0x349d6b0, 0x400376d2c0})\n\t/cadence/service/history/task/timer_standby_task_executor.go:120 +0x764\ngithub.com/uber/cadence/service/history/task.(*taskImpl).Execute(0x400376d2c0)\n\t/cadence/service/history/task/task.go:167 +0x22c\ngithub.com/uber/cadence/common/task.(*parallelTaskProcessorImpl).executeTask.func2({0x3467810?, 0x509ae60?})\n\t/cadence/common/task/parallel_task_processor.go:166 +0x30\ngithub.com/uber/cadence/common/backoff.(*ThrottleRetry).Do(0x40041d59c0, {0x3467810, 0x509ae60}, 0x4002b61e78)\n\t/cadence/common/backoff/retry.go:186 +0x108\ngithub.com/uber/cadence/common/task.(*parallelTaskProcessorImpl).executeTask(0x40006cf110, {0xffff56c5df80, 0x400376d2c0}, 0x40010a1650)\n\t/cadence/common/task/parallel_task_processor.go:186 +0x1d4\ngithub.com/uber/cadence/common/task.(*parallelTaskProcessorImpl).taskWorker(0x40006cf110, 0x40010a1650)\n\t/cadence/common/task/parallel_task_processor.go:148 +0x6c\ncreated by github.com/uber/cadence/common/task.(*parallelTaskProcessorImpl).Start in goroutine 1868\n\t/cadence/common/task/parallel_task_processor.go:96 +0xc4\n","service":"cadence-history","shard-id":0,"address":"[::]:7934","component":"history-cache","wf-domain-id":"9751aa20-c32c-4fc7-b4fa-518f99f2d8fa","wf-id":"wf8","wf-run-id":"35bbacc5-26de-4887-9c82-650ffe7066ef","logging-call-at":"mutable_state_builder.go:1438"}
{"ts":"2025-08-05T23:21:25.703Z","msg":"UpdateCurrentVersion for domain 9751aa20-c32c-4fc7-b4fa-518f99f2d8fa, wfID wf8, version before: 2, version after: 2, forceUpdate: false","service":"cadence-history","shard-id":0,"address":"[::]:7934","component":"history-cache","wf-domain-id":"9751aa20-c32c-4fc7-b4fa-518f99f2d8fa","wf-id":"wf8","wf-run-id":"35bbacc5-26de-4887-9c82-650ffe7066ef","logging-call-at":"mutable_state_builder.go:541"}
{"ts":"2025-08-05T23:21:25.703Z","msg":"DomainID: 9751aa20-c32c-4fc7-b4fa-518f99f2d8fa is active, task: &{{9751aa20-c32c-4fc7-b4fa-518f99f2d8fa wf8 35bbacc5-26de-4887-9c82-650ffe7066ef} {0 1048578 2025-08-05 23:20:17.697 +0000 UTC}} version == target version: 0.","service":"cadence-history","shard-id":0,"address":"[::]:7934","component":"timer-queue-processor","queue-type":"standby","active-cluster-name":"cluster0","logging-call-at":"task_util.go:209"}
{"ts":"2025-08-05T23:21:25.703Z","msg":"processTimer got historyResendInfo from actionFn","service":"cadence-history","shard-id":0,"address":"[::]:7934","component":"timer-queue-processor","queue-type":"standby","active-cluster-name":"cluster0","wf-id":"wf8","wf-run-id":"35bbacc5-26de-4887-9c82-650ffe7066ef","wf-domain-id":"9751aa20-c32c-4fc7-b4fa-518f99f2d8fa","queue-task-id":1048578,"queue-task-type":3,"timestamp":"2025-08-05T23:20:17.697Z","logging-call-at":"timer_standby_task_executor.go:492"}
{"ts":"2025-08-05T23:21:25.703Z","msg":"standbyTaskPostActionNoOp return redispatch error so task processing logic will retry","service":"cadence-history","shard-id":0,"address":"[::]:7934","component":"timer-queue-processor","queue-type":"standby","active-cluster-name":"cluster0","wf-id":"wf8","wf-run-id":"35bbacc5-26de-4887-9c82-650ffe7066ef","wf-domain-id":"9751aa20-c32c-4fc7-b4fa-518f99f2d8fa","queue-task-id":1048578,"queue-task-type":3,"xdc-failover-version":0,"timestamp":"2025-08-05T23:20:17.697Z","logging-call-at":"standby_task_util.go:58"}
